<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
			 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		<mapper namespace="net.daum.byb.service.MemberDao">
				<resultMap type="net.daum.byb.entities.Member" id="memberMap">
						<id property="seq"  column="seq"/>
						<id property="email"  column="email"/>
						<id property="password"  column="password"/>
						<id property="nickname"  column="nickname"/>
						<id property="joindate"  column="joindate"/>
						<id property="point"  column="point"/>
						<id property="memberlevel"  column="memberlevel"/>
						<id property="name"  column="name"/>
						<id property="phone"  column="phone"/>
						<id property="newpassword"  column="newpassword"/>
			
				</resultMap>
				<select id="selectOne" parameterType="String" resultMap="memberMap" >
						select * from member where email=#{email}
				</select>
				<select id="selectCount" parameterType="String" resultType="int" >
						select count(*) from member where email=#{email}
				</select>
				<insert id="insertRow" parameterType="hashMap" >
						insert into member(seq,email,password,nickname,joindate,point,memberlevel) 
						values ((select coalesce(max(seq)+1,1) from member),#{email},#{newpassword},#{nickname},#{joindate},
								#{point},#{memberlevel})
				</insert>
				<select id="selectLogin" parameterType="hashMap" resultMap="memberMap">
						select * from member where email=#{email} and password = #{password}
				</select>
				<update id="updateRow" parameterType="hashMap">
						update member set  password=#{password},nickname=#{nickname} where email=#{email}
				</update>
				<delete id="deleteRow" parameterType="hashMap"  >
						delete from member  where email=#{email}
				</delete>

		</mapper>